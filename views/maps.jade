doctype
html
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    meta(http-equiv="X-UA-Compatible", content="ie=edge")
    link(rel="stylesheet", href="/cbsmartlife-ca1e5/us-central1/widgets/css/style.css")
    link(rel="stylesheet", href="https://www.w3schools.com/w3css/4/w3.css")
    link(rel="stylesheet", href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css")
    script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js")
    script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js")
    title Document
  body
  
    include nav.jade
    h1 My First Google Map

    div(id="googleMap" style="width:100%;height:400px;")
    script(type="text/javascript").
      var map,mapProp;
      function myMap() {
        mapProp= {
          center:new google.maps.LatLng(55.55,55.55),
          zoom:5,
        };
        map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
        var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
          if (this.readyState == 4 && this.status == 200) {
            var pos = JSON.parse(this.response)
            pos.forEach(dat=>{
              var myCenter = new google.maps.LatLng(dat.lat,dat.lon);
              var marker = new google.maps.Marker({position:myCenter});
              marker.setMap(map);
            })
          }
        };
        xhttp.open("GET", "http://localhost:5000/hyorder-36a01/us-central1/widgets/test", true);
        xhttp.send();
      }
            
    script(src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA36JkgHbfhad4b2fH4tZtpqGZ8E_YDXRI&callback=myMap")
    
  
